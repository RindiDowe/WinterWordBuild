<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Build & Type: Christmas & Winter Words</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg1:#fef9c3;
      --bg2:#e0f2fe;
      --bg3:#e5e7eb;

      --card:#ffffff;
      --ink:#111827;
      --accent:#b91c1c;
      --accent-2:#15803d;
      --muted:#6b7280;
      --good:#16a34a;
      --bad:#b91c1c;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:1rem;
      background:
        radial-gradient(circle at top left,#fee2e2 0,transparent 55%),
        radial-gradient(circle at top right,#bfdbfe 0,transparent 55%),
        linear-gradient(to bottom,var(--bg1),var(--bg2) 40%,var(--bg3));
      color:var(--ink);
    }

    .app{
      width:100%;
      max-width:900px;
    }

    h1{
      text-align:center;
      margin:.2rem 0 .3rem;
      font-size:clamp(1.6rem,3.1vw,2.2rem);
      letter-spacing:.04em;
    }

    .tagline{
      text-align:center;
      margin:0 0 .9rem;
      font-size:.95rem;
      color:var(--muted);
    }

    .card{
      background:var(--card);
      border-radius:1.25rem;
      padding:1.1rem 1.3rem 1.3rem;
      box-shadow:0 18px 35px rgba(15,23,42,.22);
      border:3px solid #fecaca;
    }

    .top-row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      flex-wrap:wrap;
      gap:.5rem;
      margin-bottom:.7rem;
    }

    .badge{
      padding:.35rem .75rem;
      border-radius:999px;
      background:#fee2e2;
      border:1px solid #fecaca;
      font-size:.8rem;
      font-weight:600;
      display:inline-flex;
      align-items:center;
      gap:.3rem;
      white-space:nowrap;
    }

    .hidden{display:none;}

    /* START SCREEN */
    #start-screen{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:.75rem;
      padding:1.2rem 0;
      text-align:center;
    }

    .btn{
      border:none;
      border-radius:999px;
      padding:.75rem 1.6rem;
      font-size:1rem;
      font-weight:700;
      cursor:pointer;
      color:white;
      box-shadow:0 12px 22px rgba(0,0,0,.25);
      display:inline-flex;
      align-items:center;
      gap:.45rem;
      transition:transform .08s ease,box-shadow .08s ease,filter .08s ease;
    }
    .btn.large{
      min-width:210px;
      justify-content:center;
    }
    .btn.red{
      background:linear-gradient(135deg,#f97373,var(--accent));
    }
    .btn.green{
      background:linear-gradient(135deg,#4ade80,var(--accent-2));
    }
    .btn.small{
      padding:.45rem 1rem;
      font-size:.88rem;
      box-shadow:none;
      border-radius:.9rem;
    }
    .btn:active{
      transform:translateY(1px);
      box-shadow:0 6px 14px rgba(0,0,0,.2);
      filter:brightness(.97);
    }
    .btn[disabled]{
      opacity:.6;
      cursor:default;
      box-shadow:none;
    }

    /* BUILD AREA */
    .build-area{
      border-radius:1rem;
      border:2px dashed #e5e7eb;
      padding:.9rem .6rem .9rem;
      background:#f9fafb;
      margin-bottom:.7rem;
    }
    .build-label{
      font-weight:600;
      margin:0 0 .3rem;
      font-size:.95rem;
      padding:0 .4rem;
    }
    #target-word-text{
      font-weight:800;
      letter-spacing:.2em;
      text-align:center;
      margin:0 0 .45rem;
      color:#4b5563;
    }

    #build-row{
      display:flex;
      flex-wrap:wrap;
      justify-content:center;
      gap:.45rem;
      padding:.25rem .2rem;
    }

    .slot{
      width:3.4rem;
      height:3.4rem;
      border-radius:.9rem;
      border:3px solid #9ca3af;
      flex:0 0 auto;
      position:relative;
      overflow:hidden;
      /* LEGO baseplate studs */
      background-color:#f3f4f6;
      background-image:
        radial-gradient(circle,#d1d5db 22%,transparent 24%),
        radial-gradient(circle,#d1d5db 22%,transparent 24%);
      background-size:10px 10px;
      background-position:0 0,5px 5px;
      box-shadow:0 0 0 3px #e5e7eb;
    }

    .slot.filled{
      border-color:#4ade80;
      box-shadow:0 0 0 3px #bbf7d0;
    }

    .slot-spot{
      position:relative;
      width:100%;
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:1;
    }

    /* LETTER BANK */
    .letter-bank-wrap{
      margin-top:.35rem;
    }
    .bank-label{
      font-weight:600;
      font-size:.9rem;
      margin-bottom:.25rem;
      padding:0 .4rem;
      color:var(--muted);
      display:flex;
      justify-content:space-between;
      gap:.5rem;
    }
    .letter-bank{
      display:flex;
      flex-wrap:wrap;
      justify-content:center;
      gap:.45rem;
      padding:.6rem;
      border-radius:1rem;
      background:#eef2ff;
      border:1px solid #c7d2fe;
      min-height:3.6rem;
    }

    /* LEGO bricks ‚Äì rainbow 2x4 style */
    .brick{
      width:3.6rem;
      height:2.2rem;
      border-radius:.7rem;
      background:var(--brick-color,#f97373);
      box-shadow:0 6px 0 rgba(15,23,42,.35),0 9px 16px rgba(15,23,42,.25);
      border:2px solid rgba(248,250,252,.9);
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:grab;
      position:relative;
      flex:0 0 auto;
    }
    .brick:active{
      cursor:grabbing;
      transform:translateY(1px);
      box-shadow:0 4px 0 rgba(15,23,42,.35),0 7px 14px rgba(15,23,42,.35);
    }
    .brick::before,
    .brick::after{
      content:"";
      position:absolute;
      width:78%;
      height:28%;
      border-radius:999px;
      border:3px dotted rgba(248,250,252,.95);
      left:50%;
      transform:translateX(-50%);
    }
    .brick::before{ top:10%; }
    .brick::after { bottom:10%; }

    /* TYPE SECTION */
    .type-section{
      margin-top:.9rem;
      border-radius:1rem;
      padding:.8rem .75rem .85rem;
      background:#ecfdf5;
      border:1px solid #a7f3d0;
    }
    .type-section h3{
      margin:.1rem 0 .45rem;
      font-size:1rem;
    }
    .type-row{
      display:flex;
      flex-wrap:wrap;
      gap:.45rem;
      align-items:center;
    }
    #type-input{
      flex:1;
      min-width:150px;
      padding:.55rem .7rem;
      border-radius:.75rem;
      border:2px solid #6ee7b7;
      font-size:1rem;
    }
    #type-input:focus{
      outline:none;
      border-color:#22c55e;
      box-shadow:0 0 0 2px rgba(34,197,94,.35);
    }

    #type-feedback{
      margin-top:.3rem;
      font-weight:600;
      font-size:.9rem;
    }
    #type-feedback.good{ color:var(--good); }
    #type-feedback.bad{ color:var(--bad); }

    /* MESSAGES & BOTTOM */
    #message{
      margin-top:.6rem;
      font-weight:600;
      text-align:center;
      font-size:.95rem;
      color:var(--muted);
      min-height:1.1rem;
    }

    .bottom-row{
      margin-top:.75rem;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:.5rem;
      flex-wrap:wrap;
    }

    #finish-screen{
      margin-top:.6rem;
      text-align:center;
    }
    #finish-text{
      font-size:1.05rem;
      font-weight:700;
      margin-bottom:.4rem;
    }

    @media (max-width:640px){
      .slot{
        width:3rem;
        height:3rem;
      }
      .brick{
        width:3.2rem;
        height:2rem;
      }
      .bottom-row{
        flex-direction:column-reverse;
        align-items:stretch;
      }
      .bottom-row .btn.small{
        width:100%;
        justify-content:center;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <h1>Build & Type: Christmas & Winter Words</h1>
    <p class="tagline">Color in the LEGO word with blocks, then type it!</p>

    <div class="card">
      <!-- START SCREEN -->
      <div id="start-screen">
        <p style="margin:0 0 .7rem;">Choose a level to begin:</p>
        <button class="btn large red" data-grade="K">üéÑ Kindergarten Words</button>
        <button class="btn large green" data-grade="1">‚òÉÔ∏è 1st Grade Words</button>
      </div>

      <!-- GAME SCREEN -->
      <div id="game" class="hidden">
        <div class="top-row">
          <span class="badge" id="grade-label"></span>
          <span class="badge">Word <span id="word-index">1</span>/<span id="word-total">5</span></span>
        </div>

        <div class="build-area">
          <p class="build-label">
            Build (color in) this LEGO word:
          </p>
          <p id="target-word-text"></p>
          <div id="build-row"></div>
        </div>

        <div class="letter-bank-wrap">
          <div class="bank-label">
            <span>Blocks</span>
            <span style="font-size:.8rem;">Drag the blocks onto each letter tile.</span>
          </div>
          <div id="letter-bank" class="letter-bank"></div>
        </div>

        <div id="type-section" class="type-section hidden">
          <h3>Now type the word:</h3>
          <div class="type-row">
            <input id="type-input" type="text" autocomplete="off" />
            <button id="check-typed" class="btn small red">Check</button>
          </div>
          <div id="type-feedback"></div>
        </div>

        <div id="message"></div>

        <div class="bottom-row">
          <button id="reset-word" class="btn small green">Reset Word</button>
          <button id="next-word" class="btn small red hidden">Next Word ‚ûú</button>
        </div>

        <div id="finish-screen" class="hidden">
          <p id="finish-text">‚ú® Snow-tastic work! You finished all the words. ‚ú®</p>
          <button id="play-again" class="btn small green">Play Again</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Christmas / winter word lists
    const wordSets = {
      K: ["joy","elf","hat","snow","tree"],
      1: ["sled","bells","candy","lights","frost"]
    };

    const brickPalette = [
      "#f97373", // red
      "#fb923c", // orange
      "#facc15", // yellow
      "#22c55e", // green
      "#38bdf8", // blue
      "#a855f7", // purple
      "#f472b6"  // pink
    ];

    let currentGrade = "K";
    let words = [];
    let currentIndex = 0;
    let currentWord = "";
    let brickIdCounter = 0;

    const startScreen   = document.getElementById("start-screen");
    const gameScreen    = document.getElementById("game");
    const gradeLabel    = document.getElementById("grade-label");
    const wordIndexEl   = document.getElementById("word-index");
    const wordTotalEl   = document.getElementById("word-total");
    const targetWordText= document.getElementById("target-word-text");
    const buildRow      = document.getElementById("build-row");
    const letterBank    = document.getElementById("letter-bank");
    const typeSection   = document.getElementById("type-section");
    const typeInput     = document.getElementById("type-input");
    const checkTypedBtn = document.getElementById("check-typed");
    const typeFeedback  = document.getElementById("type-feedback");
    const messageEl     = document.getElementById("message");
    const resetBtn      = document.getElementById("reset-word");
    const nextBtn       = document.getElementById("next-word");
    const finishScreen  = document.getElementById("finish-screen");
    const playAgainBtn  = document.getElementById("play-again");

    // Level select buttons
    document.querySelectorAll("#start-screen .btn").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        currentGrade = btn.dataset.grade;
        startGame();
      });
    });

    // Allow dropping back into bank
    letterBank.addEventListener("dragover", handleDragOver);
    letterBank.addEventListener("drop", handleDropOnBank);

    function startGame(){
      words = [...wordSets[currentGrade]];
      currentIndex = 0;
      wordTotalEl.textContent = words.length;
      gradeLabel.textContent =
        (currentGrade === "K" ? "Kindergarten list" : "1st Grade list");
      startScreen.classList.add("hidden");
      gameScreen.classList.remove("hidden");
      finishScreen.classList.add("hidden");
      loadWord();
    }

    function loadWord(){
      currentWord = words[currentIndex];
      wordIndexEl.textContent = currentIndex + 1;
      targetWordText.textContent = currentWord.toUpperCase();
      messageEl.textContent = "";
      typeFeedback.textContent = "";
      typeFeedback.className = "";
      typeSection.classList.add("hidden");
      nextBtn.classList.add("hidden");
      typeInput.value = "";

      buildRow.innerHTML = "";
      letterBank.innerHTML = "";
      brickIdCounter = 0;

      // LEGO letter template: one tile per letter
      for(let i=0;i<currentWord.length;i++){
        const slot = document.createElement("div");
        slot.className = "slot";
        slot.dataset.index = i;

        const spot = document.createElement("div");
        spot.className = "slot-spot";

        slot.appendChild(spot);
        slot.addEventListener("dragover", handleDragOver);
        slot.addEventListener("drop", handleDropOnSlot);

        buildRow.appendChild(slot);
      }

      // Blocks: one for each letter + a couple extras
      const totalBricks = currentWord.length + 2;
      for(let i=0;i<totalBricks;i++){
        const brick = createBrick();
        letterBank.appendChild(brick);
      }

      messageEl.textContent =
        "Drag the colorful blocks onto each LEGO tile.";
    }

    function createBrick(){
      const brick = document.createElement("div");
      brick.className = "brick";
      brick.draggable = true;
      brickIdCounter++;
      brick.id = "brick-" + brickIdCounter;

      // rainbow colors like the screenshot
      const color = brickPalette[(brickIdCounter - 1) % brickPalette.length];
      brick.style.setProperty("--brick-color", color);

      brick.addEventListener("dragstart", handleDragStart);
      brick.addEventListener("dragend", handleDragEnd);
      return brick;
    }

    function handleDragStart(e){
      e.dataTransfer.setData("text/plain", e.target.id);
      setTimeout(()=>{ e.target.style.opacity = "0.4"; },0);
    }

    function handleDragEnd(e){
      e.target.style.opacity = "1";
    }

    function handleDragOver(e){
      e.preventDefault();
    }

    function handleDropOnSlot(e){
      e.preventDefault();
      const slot = e.currentTarget;
      const spot = slot.querySelector(".slot-spot");
      const brickId = e.dataTransfer.getData("text/plain");
      const brick = document.getElementById(brickId);
      if(!brick) return;

      // If there's already a brick here, send it back to the bank
      if(spot.firstElementChild){
        letterBank.appendChild(spot.firstElementChild);
      }
      spot.appendChild(brick);
      slot.classList.add("filled");
      checkBuiltWord();
    }

    function handleDropOnBank(e){
      e.preventDefault();
      const brickId = e.dataTransfer.getData("text/plain");
      const brick = document.getElementById(brickId);
      if(!brick) return;
      letterBank.appendChild(brick);

      // Remove "filled" style from any now-empty slots
      document.querySelectorAll(".slot").forEach(slot=>{
        const spot = slot.querySelector(".slot-spot");
        if(!spot.firstElementChild){
          slot.classList.remove("filled");
        }
      });
      checkBuiltWord();
    }

    function checkBuiltWord(){
      const slots = Array.from(document.querySelectorAll(".slot"));
      for(const slot of slots){
        const spot = slot.querySelector(".slot-spot");
        if(!spot.firstElementChild){
          messageEl.textContent = "Keep coloring in the word...";
          return;
        }
      }
      // all slots filled
      messageEl.textContent = "Nice building! ‚úÖ Now type the word.";
      typeSection.classList.remove("hidden");
      typeInput.focus();
    }

    checkTypedBtn.addEventListener("click", checkTypedWord);
    typeInput.addEventListener("keydown", e=>{
      if(e.key === "Enter"){ checkTypedWord(); }
    });

    function checkTypedWord(){
      const typed = typeInput.value.trim().toLowerCase();
      if(!typed) return;
      if(typed === currentWord.toLowerCase()){
        typeFeedback.textContent = "Great typing! üéâ";
        typeFeedback.className = "good";
        nextBtn.classList.remove("hidden");
      }else{
        typeFeedback.textContent =
          "Almost! Check each letter and try again.";
        typeFeedback.className = "bad";
        nextBtn.classList.add("hidden");
      }
    }

    resetBtn.addEventListener("click", loadWord);

    nextBtn.addEventListener("click", ()=>{
      if(currentIndex < words.length - 1){
        currentIndex++;
        loadWord();
      }else{
        finishScreen.classList.remove("hidden");
        messageEl.textContent = "";
        typeSection.classList.add("hidden");
        nextBtn.classList.add("hidden");
      }
    });

    playAgainBtn.addEventListener("click", ()=>{
      gameScreen.classList.add("hidden");
      startScreen.classList.remove("hidden");
    });
  </script>
</body>
</html>
